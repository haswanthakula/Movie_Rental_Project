"use strict";(self.webpackChunkmovie_rental_project=self.webpackChunkmovie_rental_project||[]).push([[161],{4380:(e,n,t)=>{t.d(n,{A:()=>f});var r=t(7528),o=t(5043),a=t(5464),s=t(6580);const i=()=>{const[e,n]=(0,o.useState)(null);(0,o.useEffect)((()=>{const e=localStorage.getItem("user");e&&n(JSON.parse(e))}),[]);return{user:e,login:e=>{localStorage.setItem("user",JSON.stringify(e)),n(e)},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("userRole"),n(null)},isAuthenticated:!!e,isAdmin:"admin"===(null===e||void 0===e?void 0:e.role)}};var l,d,c,u,g,h=t(2115),m=t(579);const x=a.Ay.nav(l||(l=(0,r.A)(["\n  background: #141e30;\n  padding: 1rem 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),v=(0,a.Ay)(s.N_)(d||(d=(0,r.A)(["\n  color: white;\n  font-size: 1.5rem;\n  font-weight: bold;\n  text-decoration: none;\n"]))),A=a.Ay.div(c||(c=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  gap: 2rem;\n"]))),p=(0,a.Ay)(s.N_)(u||(u=(0,r.A)(["\n  color: white;\n  text-decoration: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  transition: background-color 0.2s;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  &.active {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),y=a.Ay.button(g||(g=(0,r.A)(["\n  background: #e50914;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n\n  &:hover {\n    background: #f40612;\n  }\n"]))),f=()=>{const{logout:e}=i(),n=(0,s.Zp)();return(0,m.jsxs)(x,{children:[(0,m.jsx)(v,{to:"/admin/dashboard",children:"Movie Rental Admin"}),(0,m.jsxs)(A,{children:[(0,m.jsx)(p,{to:"/admin/dashboard",children:"Dashboard"}),(0,m.jsx)(p,{to:"/admin/movies",children:"Movie Management"}),(0,m.jsx)(p,{to:"/admin/sales-report",children:"Sales Report"}),(0,m.jsx)(y,{onClick:()=>{localStorage.removeItem("userRole"),h.oR.info("Logged out successfully"),n("/")},children:"Logout"})]})]})}},3161:(e,n,t)=>{t.r(n),t.d(n,{default:()=>N});var r,o,a,s,i,l=t(7528),d=t(5043),c=t(5464),u=t(3707),g=t(2849),h=t(9029),m=t(9383),x=t(6051),v=t(3395),A=t(3515),p=t(9472),y=(t(2115),t(446)),f=t.n(y),j=t(4380),b=t(4710),S=t(579);const{RangePicker:k}=u.A,{Title:w}=g.A,I=c.Ay.div(r||(r=(0,l.A)(["\n  min-height: 100vh;\n  background-color: #f5f5f5;\n"]))),O=c.Ay.div(o||(o=(0,l.A)(["\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n"]))),R=c.Ay.div(a||(a=(0,l.A)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n"]))),M=c.Ay.div(s||(s=(0,l.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n"]))),D=c.Ay.div(i||(i=(0,l.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n"]))),N=()=>{const{movies:e}=(0,b.$H)(),[n,t]=(0,d.useState)([]),[r,o]=(0,d.useState)(!0),[a,s]=(0,d.useState)(null),[i,l]=(0,d.useState)([f()().subtract(7,"day"),f()()]);(0,d.useEffect)((()=>{c()}),[]);const c=()=>{try{const e=JSON.parse(localStorage.getItem("users")||"[]").flatMap((e=>e.orders||[]));0===e.length?s("No orders found. Start selling movies to generate a sales report."):(t(e),s(null)),o(!1)}catch(a){console.error("Error fetching orders:",a),s("Failed to load orders. Please check your local storage."),o(!1)}},u=n.filter((e=>{const n=f()(e.orderDate);return n.isAfter(i[0])&&n.isBefore(i[1].add(1,"day"))})),g={totalOrders:u.length,totalRevenue:u.reduce(((e,n)=>e+n.total),0),averageOrderValue:u.length>0?u.reduce(((e,n)=>e+n.total),0)/u.length:0,totalMovies:u.reduce(((e,n)=>e+n.items.length),0)},y=[{title:"Order ID",dataIndex:"id",key:"id"},{title:"Customer",dataIndex:"customerInfo",key:"customer",render:e=>(null===e||void 0===e?void 0:e.name)||"Unknown"},{title:"Date",dataIndex:"orderDate",key:"date",render:e=>f()(e).format("YYYY-MM-DD HH:mm")},{title:"Total",dataIndex:"total",key:"total",render:e=>"$".concat(e.toFixed(2))}];return r?(0,S.jsxs)(I,{children:[(0,S.jsx)(j.A,{}),(0,S.jsxs)(M,{children:[(0,S.jsx)(h.A,{size:"large"}),(0,S.jsx)("p",{children:"Loading sales report..."})]})]}):a?(0,S.jsxs)(I,{children:[(0,S.jsx)(j.A,{}),(0,S.jsx)(D,{children:(0,S.jsx)(m.A,{message:"Sales Report",description:a,type:"warning",showIcon:!0})})]}):(0,S.jsxs)(I,{children:[(0,S.jsx)(j.A,{}),(0,S.jsx)(O,{children:(0,S.jsxs)(x.A,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,S.jsx)(k,{value:i,onChange:e=>{l(e)},style:{marginBottom:"20px"}}),(0,S.jsxs)(R,{children:[(0,S.jsx)(v.A,{title:"Total Orders",style:{width:200},children:g.totalOrders}),(0,S.jsxs)(v.A,{title:"Total Revenue",style:{width:200},children:["$",g.totalRevenue.toFixed(2)]}),(0,S.jsxs)(v.A,{title:"Avg Order Value",style:{width:200},children:["$",g.averageOrderValue.toFixed(2)]}),(0,S.jsx)(v.A,{title:"Total Movies Sold",style:{width:200},children:g.totalMovies})]}),(0,S.jsx)(w,{level:3,children:"Order History"}),u.length>0?(0,S.jsx)(A.A,{columns:y,dataSource:u,rowKey:"id",pagination:{pageSize:5}}):(0,S.jsx)(p.A,{description:"No orders found in the selected date range",style:{margin:"20px 0"}})]})})]})}}}]);
//# sourceMappingURL=161.366630db.chunk.js.map