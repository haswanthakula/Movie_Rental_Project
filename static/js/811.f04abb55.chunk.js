"use strict";(self.webpackChunkmovie_rental_project=self.webpackChunkmovie_rental_project||[]).push([[811],{2999:(n,e,r)=>{r.d(e,{A:()=>v});var o,t,i,s,d,a,l=r(7528),c=(r(5043),r(5464)),m=r(6580),u=r(2224),p=r(5016),h=r(2115),x=r(579);const g=c.Ay.nav(o||(o=(0,l.A)(["\n  background: #141414;\n  padding: 1rem 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n"]))),b=c.Ay.div(t||(t=(0,l.A)(["\n  color: #e50914;\n  font-size: 1.5rem;\n  font-weight: bold;\n"]))),A=c.Ay.div(i||(i=(0,l.A)(["\n  display: flex;\n  align-items: center;\n  gap: 2rem;\n"]))),f=(0,c.Ay)(m.N_)(s||(s=(0,l.A)(["\n  color: white;\n  text-decoration: none;\n  font-size: 1rem;\n  transition: color 0.3s ease;\n\n  &:hover {\n    color: #e50914;\n  }\n"]))),y=c.Ay.span(d||(d=(0,l.A)(["\n  color: white;\n  margin-right: 1rem;\n"]))),j=c.Ay.button(a||(a=(0,l.A)(["\n  background: #e50914;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n\n  &:hover {\n    background: #f40612;\n  }\n"]))),v=()=>{const{cartCount:n}=(0,u._$)(),{user:e,logout:r}=(0,p.As)(),o=(0,m.Zp)();return(0,x.jsxs)(g,{children:[(0,x.jsx)(b,{children:"Movie Rental"}),(0,x.jsxs)(A,{children:[(0,x.jsx)(f,{to:"/user/home",children:"Home"}),(0,x.jsx)(f,{to:"/user/movies",children:"Movies"}),(0,x.jsxs)(f,{to:"/user/cart",children:["Cart (",n,")"]}),(0,x.jsx)(f,{to:"/user/orders",children:"Orders"}),(0,x.jsxs)(y,{children:["Welcome, ",(null===e||void 0===e?void 0:e.name)||"User"]}),(0,x.jsx)(j,{onClick:()=>{r(),h.oR.success("Logged out successfully"),o("/")},children:"Logout"})]})]})}},7811:(n,e,r)=>{r.r(e),r.d(e,{default:()=>En});var o,t,i,s,d,a,l,c,m,u,p,h,x,g,b=r(7528),A=r(9379),f=r(5043),y=r(5464),j=r(2999),v=r(2224),k=r(2115),w=r(579);const C=y.Ay.div(o||(o=(0,b.A)(["\n  background: white;\n  padding: 2rem;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  max-width: 600px;\n  margin: 0 auto;\n"]))),z=y.Ay.h2(t||(t=(0,b.A)(["\n  color: #333;\n  margin-bottom: 1rem;\n  text-align: center;\n"]))),R=y.Ay.form(i||(i=(0,b.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),S=y.Ay.div(s||(s=(0,b.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),q=y.Ay.label(d||(d=(0,b.A)(["\n  color: #333;\n  font-weight: bold;\n"]))),F=y.Ay.input(a||(a=(0,b.A)(["\n  padding: 0.8rem;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 0.8rem;\n\n  &:focus {\n    outline: none;\n    border-color: #e50914;\n  }\n"]))),I=y.Ay.textarea(l||(l=(0,b.A)(["\n  padding: 0.8rem;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 0.8rem;\n  min-height: 100px;\n  resize: vertical;\n\n  &:focus {\n    outline: none;\n    border-color: #e50914;\n  }\n"]))),O=y.Ay.div(c||(c=(0,b.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.7rem;\n  background: #f8f9fa;\n  border-radius: 4px;\n  margin-top: 1rem;\n"]))),P=y.Ay.span(m||(m=(0,b.A)(["\n  font-weight: bold;\n  color: #333;\n"]))),$=y.Ay.span(u||(u=(0,b.A)(["\n  font-size: 1rem;\n  font-weight: bold;\n  color: #e50914;\n"]))),N=y.Ay.div(p||(p=(0,b.A)(["\n  display: flex;\n  gap: 0.8rem;\n  margin-top: 0.5rem;\n"]))),_=y.Ay.button(h||(h=(0,b.A)(["\n  flex: 1;\n  padding: 1rem;\n  border: none;\n  border-radius: 4px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: background-color 0.2s;\n"]))),E=(0,y.Ay)(_)(x||(x=(0,b.A)(["\n  background: #e50914;\n  color: white;\n\n  &:hover {\n    background: #f40612;\n  }\n"]))),D=(0,y.Ay)(_)(g||(g=(0,b.A)(["\n  background: #666;\n  color: white;\n\n  &:hover {\n    background: #777;\n  }\n"]))),J=n=>{let{onSubmit:e,total:r,onCancel:o}=n;const[t,i]=(0,f.useState)({name:"",email:"",address:"",phone:""}),s=n=>{const{name:e,value:r}=n.target;i((n=>(0,A.A)((0,A.A)({},n),{},{[e]:r})))};return(0,w.jsxs)(C,{children:[(0,w.jsx)(z,{children:"Checkout"}),(0,w.jsxs)(R,{onSubmit:n=>{if(n.preventDefault(),!t.name||!t.email||!t.address||!t.phone)return void k.oR.error("Please fill in all required fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))return void k.oR.error("Please enter a valid email address");/^\d{10}$/.test(t.phone)?e(t):k.oR.error("Please enter a valid 10-digit phone number")},children:[(0,w.jsxs)(S,{children:[(0,w.jsx)(q,{children:"Name *"}),(0,w.jsx)(F,{type:"text",name:"name",value:t.name,onChange:s,required:!0,placeholder:"Enter your full name"})]}),(0,w.jsxs)(S,{children:[(0,w.jsx)(q,{children:"Email *"}),(0,w.jsx)(F,{type:"email",name:"email",value:t.email,onChange:s,required:!0,placeholder:"Enter your email"})]}),(0,w.jsxs)(S,{children:[(0,w.jsx)(q,{children:"Address *"}),(0,w.jsx)(I,{name:"address",value:t.address,onChange:s,required:!0,placeholder:"Enter your full address"})]}),(0,w.jsxs)(S,{children:[(0,w.jsx)(q,{children:"Phone *"}),(0,w.jsx)(F,{type:"tel",name:"phone",value:t.phone,onChange:s,required:!0,placeholder:"Enter 10-digit phone number"})]}),(0,w.jsxs)(O,{children:[(0,w.jsx)(P,{children:"Order Total:"}),(0,w.jsxs)($,{children:["$",r.toFixed(2)]})]}),(0,w.jsxs)(N,{children:[(0,w.jsx)(D,{type:"button",onClick:o,children:"Cancel"}),(0,w.jsx)(E,{type:"submit",children:"Place Order"})]})]})]})};var M,T,U,Y,L,Z,B,H,Q,W,G,K,V,X,nn,en,rn,on,tn,sn,dn,an,ln,cn=r(6580),mn=r(6286),un=r(5016),pn=r(9722);const hn=y.Ay.div(M||(M=(0,b.A)(["\n  min-height: 100vh;\n  background-color: #f5f5f5;\n"]))),xn=y.Ay.div(T||(T=(0,b.A)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 2rem;\n"]))),gn=y.Ay.h2(U||(U=(0,b.A)(["\n  color: #333;\n  margin-bottom: 2rem;\n  font-size: 1.8rem;\n"]))),bn=y.Ay.div(Y||(Y=(0,b.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2rem;\n"]))),An=y.Ay.button(L||(L=(0,b.A)(["\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: #c82333;\n  }\n"]))),fn=y.Ay.div(Z||(Z=(0,b.A)(["\n  text-align: center;\n  padding: 3rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\n  h3 {\n    color: #333;\n    margin-bottom: 1rem;\n    font-size: 1.5rem;\n  }\n\n  p {\n    color: #666;\n    font-size: 1.1rem;\n    margin-bottom: 2rem;\n  }\n"]))),yn=y.Ay.button(B||(B=(0,b.A)(["\n  background: #e50914;\n  color: white;\n  border: none;\n  padding: 1rem 2rem;\n  border-radius: 4px;\n  font-size: 1.1rem;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: #f40612;\n  }\n"]))),jn=y.Ay.div(H||(H=(0,b.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 2rem;\n"]))),vn=y.Ay.div(Q||(Q=(0,b.A)(["\n  display: flex;\n  gap: 2rem;\n  background: white;\n  padding: 1.5rem;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n"]))),kn=y.Ay.img(W||(W=(0,b.A)(["\n  width: 120px;\n  height: 180px;\n  object-fit: cover;\n  border-radius: 4px;\n"]))),wn=y.Ay.div(G||(G=(0,b.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),Cn=y.Ay.h3(K||(K=(0,b.A)(["\n  margin: 0;\n  color: #333;\n  font-size: 1.2rem;\n"]))),zn=y.Ay.div(V||(V=(0,b.A)(["\n  color: #e50914;\n  font-weight: bold;\n  font-size: 1.1rem;\n"]))),Rn=y.Ay.div(X||(X=(0,b.A)(["\n  color: #666;\n  font-size: 1rem;\n"]))),Sn=y.Ay.div(nn||(nn=(0,b.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),qn=y.Ay.button(en||(en=(0,b.A)(["\n  background: #e50914;\n  color: white;\n  border: none;\n  width: 30px;\n  height: 30px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: #f40612;\n  }\n\n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n  }\n"]))),Fn=y.Ay.span(rn||(rn=(0,b.A)(["\n  font-size: 1.1rem;\n  color: #333;\n  min-width: 40px;\n  text-align: center;\n"]))),In=y.Ay.button(on||(on=(0,b.A)(["\n  background: none;\n  border: none;\n  color: #e50914;\n  cursor: pointer;\n  padding: 0.5rem 0;\n  font-size: 0.9rem;\n  text-align: left;\n\n  &:hover {\n    text-decoration: underline;\n  }\n"]))),On=y.Ay.div(tn||(tn=(0,b.A)(["\n  background: white;\n  padding: 1.5rem;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n"]))),Pn=y.Ay.div(sn||(sn=(0,b.A)(["\n  margin-bottom: 1.5rem;\n"]))),$n=y.Ay.div(dn||(dn=(0,b.A)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n  color: #666;\n"]))),Nn=y.Ay.div(an||(an=(0,b.A)(["\n  display: flex;\n  justify-content: space-between;\n  font-size: 1.3rem;\n  font-weight: bold;\n  color: #333;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid #eee;\n"]))),_n=y.Ay.button(ln||(ln=(0,b.A)(["\n  background: #e50914;\n  color: white;\n  border: none;\n  padding: 1rem 2rem;\n  border-radius: 4px;\n  font-size: 1.1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  width: 100%;\n\n  &:hover {\n    background: #f40612;\n  }\n"]))),En=()=>{const{cart:n,removeFromCart:e,updateQuantity:r,clearCart:o}=(0,v._$)(),t=(0,cn.Zp)(),[i,s]=(0,f.useState)(!1),{addOrder:d}=(0,mn.h)(),{user:a}=(0,un.As)(),l=()=>n.reduce(((n,e)=>n+parseFloat(e.price)*e.quantity),0),c=(n,o)=>{if(o<1)return e(n),void k.oR.info("Item removed from cart");r(n,o)};return(0,w.jsxs)(hn,{children:[(0,w.jsx)(j.A,{}),(0,w.jsxs)(xn,{children:[!i&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(bn,{children:[(0,w.jsxs)(gn,{children:["Shopping Cart (",n.length," items)"]}),n&&n.length>0&&(0,w.jsx)(An,{onClick:()=>{o(),k.oR.success("Cart cleared successfully")},children:"Clear Cart"})]}),n&&0!==n.length?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(jn,{children:n.map((n=>(0,w.jsxs)(vn,{children:[(0,w.jsx)(kn,{src:n.image||"https://via.placeholder.com/150x200?text=".concat(encodeURIComponent(n.title)),alt:n.title,onError:e=>{e.target.src="https://via.placeholder.com/150x200?text=".concat(encodeURIComponent(n.title))}}),(0,w.jsxs)(wn,{children:[(0,w.jsx)(Cn,{children:n.title}),(0,w.jsxs)(zn,{children:["$",parseFloat(n.price).toFixed(2)]}),(0,w.jsxs)(Sn,{children:[(0,w.jsx)(qn,{onClick:()=>c(n.id,n.quantity-1),disabled:n.quantity<=1,children:"-"}),(0,w.jsx)(Fn,{children:n.quantity}),(0,w.jsx)(qn,{onClick:()=>c(n.id,n.quantity+1),children:"+"})]}),(0,w.jsxs)(Rn,{children:["Subtotal: $",(parseFloat(n.price)*n.quantity).toFixed(2)]}),(0,w.jsx)(In,{onClick:()=>{return r=n.id,e(r),void k.oR.info("Item removed from cart");var r},children:"Remove"})]})]},n.id)))}),(0,w.jsxs)(On,{children:[(0,w.jsxs)(Pn,{children:[(0,w.jsxs)($n,{children:[(0,w.jsx)("span",{children:"Subtotal:"}),(0,w.jsxs)("span",{children:["$",l().toFixed(2)]})]}),(0,w.jsxs)($n,{children:[(0,w.jsx)("span",{children:"Tax (10%):"}),(0,w.jsxs)("span",{children:["$",(.1*l()).toFixed(2)]})]}),(0,w.jsxs)(Nn,{children:[(0,w.jsx)("span",{children:"Total:"}),(0,w.jsxs)("span",{children:["$",(1.1*l()).toFixed(2)]})]})]}),(0,w.jsx)(_n,{onClick:()=>{n&&0!==n.length?s(!0):k.oR.error("Your cart is empty!")},children:"Proceed to Checkout"})]})]}):(0,w.jsxs)(fn,{children:[(0,w.jsx)("h3",{children:"Your cart is empty"}),(0,w.jsx)("p",{children:"Add some movies to get started!"}),(0,w.jsx)(yn,{onClick:()=>t("/user/movies"),children:"Browse Movies"})]})]}),i&&(0,w.jsx)(J,{onSubmit:async e=>{try{if(!a)return void k.oR.error("Please log in to place an order");if(0===n.length)return void k.oR.error("Your cart is empty");const i={id:"ord_"+Date.now(),userId:a.id,userName:a.name,items:n.map((n=>({id:n.id,title:n.title,price:parseFloat(n.price),quantity:n.quantity,image:n.image}))),total:l(),customerInfo:e,orderDate:(new Date).toISOString()};if(i.total<=0)return void k.oR.error("Invalid order total. Please check your cart.");try{await pn.A.post("https://movies-json-hiql.onrender.com/orders",i)}catch(r){console.warn("Failed to post order to JSON server:",r)}const s=JSON.parse(localStorage.getItem("users")||"[]"),c=s.findIndex((n=>n.id===a.id));-1!==c?(s[c].orders||(s[c].orders=[]),s[c].orders.push(i),localStorage.setItem("users",JSON.stringify(s))):(s.push((0,A.A)((0,A.A)({},a),{},{orders:[i]})),localStorage.setItem("users",JSON.stringify(s))),await d(i),o(),k.oR.success("Order placed successfully!"),t("/user/orders")}catch(i){console.error("Checkout error:",i),i.response?k.oR.error("Checkout failed: ".concat(i.response.data.message||"Server error")):i.request?k.oR.error("No response from server. Please check your internet connection."):k.oR.error("Failed to process checkout. Please try again later.")}},total:l(),onCancel:()=>s(!1)})]})]})}}}]);
//# sourceMappingURL=811.f04abb55.chunk.js.map