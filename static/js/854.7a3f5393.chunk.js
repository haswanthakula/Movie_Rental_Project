"use strict";(self.webpackChunkmovie_rental_project=self.webpackChunkmovie_rental_project||[]).push([[854],{4380:(e,n,r)=>{r.d(n,{A:()=>f});var o=r(7528),t=r(5043),i=r(5464),d=r(6580);const s=()=>{const[e,n]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=localStorage.getItem("user");e&&n(JSON.parse(e))}),[]);return{user:e,login:e=>{localStorage.setItem("user",JSON.stringify(e)),n(e)},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("userRole"),n(null)},isAuthenticated:!!e,isAdmin:"admin"===(null===e||void 0===e?void 0:e.role)}};var l,a,c,m,h,u=r(2115),g=r(579);const x=i.Ay.nav(l||(l=(0,o.A)(["\n  background: #141e30;\n  padding: 1rem 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),p=(0,i.Ay)(d.N_)(a||(a=(0,o.A)(["\n  color: white;\n  font-size: 1.5rem;\n  font-weight: bold;\n  text-decoration: none;\n"]))),A=i.Ay.div(c||(c=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  gap: 2rem;\n"]))),v=(0,i.Ay)(d.N_)(m||(m=(0,o.A)(["\n  color: white;\n  text-decoration: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  transition: background-color 0.2s;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  &.active {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),b=i.Ay.button(h||(h=(0,o.A)(["\n  background: #e50914;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n\n  &:hover {\n    background: #f40612;\n  }\n"]))),f=()=>{const{logout:e}=s(),n=(0,d.Zp)();return(0,g.jsxs)(x,{children:[(0,g.jsx)(p,{to:"/admin/dashboard",children:"Movie Rental Admin"}),(0,g.jsxs)(A,{children:[(0,g.jsx)(v,{to:"/admin/dashboard",children:"Dashboard"}),(0,g.jsx)(v,{to:"/admin/movies",children:"Movie Management"}),(0,g.jsx)(v,{to:"/admin/sales-report",children:"Sales Report"}),(0,g.jsx)(b,{onClick:()=>{localStorage.removeItem("userRole"),u.oR.info("Logged out successfully"),n("/")},children:"Logout"})]})]})}},7854:(e,n,r)=>{r.r(n),r.d(n,{default:()=>T});var o,t,i,d,s,l,a,c,m,h,u,g,x,p,A,v,b,f=r(7528),j=r(5043),y=r(5464),w=r(4380),S=r(4710),k=r(2115),R=r(579);const I=y.Ay.div(o||(o=(0,f.A)(["\n  min-height: 100vh;\n  background-color: #f5f5f5;\n"]))),E=y.Ay.div(t||(t=(0,f.A)(["\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n"]))),N=y.Ay.h1(i||(i=(0,f.A)(["\n  color: #333;\n  margin-bottom: 2rem;\n"]))),O=y.Ay.section(d||(d=(0,f.A)(["\n  background: white;\n  padding: 1.5rem;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  margin-bottom: 2rem;\n"]))),C=y.Ay.h2(s||(s=(0,f.A)(["\n  color: #333;\n  margin: 0 0 1.5rem 0;\n  font-size: 1.5rem;\n"]))),D=y.Ay.div(l||(l=(0,f.A)(["\n  display: grid;\n  grid-template-columns: repeat(5, 1fr);\n  gap: 0.5rem;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: repeat(3, 1fr);\n  }\n\n  @media (max-width: 480px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n"]))),z=y.Ay.div(a||(a=(0,f.A)(["\n  background: white;\n  border-radius: 4px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  transition: transform 0.2s;\n  border: 1px solid #e0e0e0;\n  \n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),_=y.Ay.img(c||(c=(0,f.A)(["\n  width: 100%;\n  height: 120px;\n  object-fit: cover;\n"]))),J=y.Ay.div(m||(m=(0,f.A)(["\n  padding: 0.5rem;\n  text-align: center;\n"]))),M=y.Ay.h3(h||(h=(0,f.A)(["\n  margin: 0 0 0.3rem 0;\n  font-size: 0.8rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),L=y.Ay.div(u||(u=(0,f.A)(["\n  color: #e50914;\n  font-size: 0.7rem;\n  margin-bottom: 0.2rem;\n"]))),U=y.Ay.div(g||(g=(0,f.A)(["\n  font-size: 0.7rem;\n  color: #666;\n"]))),$=y.Ay.table(x||(x=(0,f.A)(["\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 1rem;\n"]))),q=y.Ay.th(p||(p=(0,f.A)(["\n  text-align: left;\n  padding: 1rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #dee2e6;\n  color: #333;\n"]))),F=y.Ay.td(A||(A=(0,f.A)(["\n  padding: 1rem;\n  border-bottom: 1px solid #dee2e6;\n  color: #666;\n"]))),H=y.Ay.button(v||(v=(0,f.A)(["\n  background: ",";\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n\n  &:hover {\n    opacity: 0.9;\n  }\n"])),(e=>e.color||"#e50914")),P=y.Ay.div(b||(b=(0,f.A)(["\n  text-align: center;\n  padding: 2rem;\n  color: #666;\n"]))),T=()=>{const{movies:e}=(0,S.$H)(),[n,r]=(0,j.useState)([]),[o,t]=(0,j.useState)([]),[i,d]=(0,j.useState)(null);(0,j.useEffect)((()=>{Promise.all([s(),l()])}),[]);const s=async()=>{try{const e=JSON.parse(localStorage.getItem("users")||"[]").flatMap((e=>e.orders||[]));r(e)}catch(i){k.oR.error("Error loading orders"),d("Error loading orders")}},l=()=>{try{const e=JSON.parse(localStorage.getItem("users")||"[]");t(e)}catch(i){k.oR.error("Error loading users"),d("Error loading users")}};return(0,R.jsxs)(I,{children:[(0,R.jsx)(w.A,{}),(0,R.jsxs)(E,{children:[(0,R.jsx)(N,{children:"Admin Dashboard"}),(0,R.jsxs)(O,{children:[(0,R.jsx)(C,{children:"Top Ordered Movies"}),(0,R.jsx)(D,{children:(()=>{const r={};return n.forEach((e=>{e.items&&Array.isArray(e.items)&&e.items.forEach((e=>{const n=e.id.toString();r[n]=(r[n]||0)+(e.quantity||1)}))})),Object.entries(r).map((n=>{let[r,o]=n;return{movie:e.find((e=>e.id.toString()===r)),orderCount:o}})).filter((e=>{let{movie:n}=e;return n})).sort(((e,n)=>n.orderCount-e.orderCount)).slice(0,5)})().map((e=>{let{movie:n,orderCount:r}=e;return(0,R.jsxs)(z,{children:[(0,R.jsx)(_,{src:null===n||void 0===n?void 0:n.image,alt:null===n||void 0===n?void 0:n.title}),(0,R.jsxs)(J,{children:[(0,R.jsx)(M,{children:null===n||void 0===n?void 0:n.title}),(0,R.jsxs)(L,{children:["Orders: ",r]}),(0,R.jsxs)(U,{children:["$",null===n||void 0===n?void 0:n.price]})]})]},null===n||void 0===n?void 0:n.id)}))})]}),(0,R.jsxs)(O,{children:[(0,R.jsx)(C,{children:"Registered Users"}),0===o.length?(0,R.jsx)(P,{children:"No registered users found"}):(0,R.jsxs)($,{children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)(q,{children:"ID"}),(0,R.jsx)(q,{children:"Name"}),(0,R.jsx)(q,{children:"Email"}),(0,R.jsx)(q,{children:"Registration Date"}),(0,R.jsx)(q,{children:"Orders"}),(0,R.jsx)(q,{children:"Actions"})]})}),(0,R.jsx)("tbody",{children:o.map((e=>{var n;return(0,R.jsxs)("tr",{children:[(0,R.jsx)(F,{children:e.id}),(0,R.jsx)(F,{children:e.name}),(0,R.jsx)(F,{children:e.email}),(0,R.jsx)(F,{children:new Date(parseInt(e.id)).toLocaleDateString()}),(0,R.jsx)(F,{children:(null===(n=e.orders)||void 0===n?void 0:n.length)||0}),(0,R.jsx)(F,{children:(0,R.jsx)(H,{onClick:()=>(e=>{try{const n=o.filter((n=>n.id!==e));localStorage.setItem("users",JSON.stringify(n)),t(n),k.oR.success("User deleted successfully")}catch(i){k.oR.error("Failed to delete user")}})(e.id),color:"#e50914",children:"Delete"})})]},e.id)}))})]})]})]})]})}}}]);
//# sourceMappingURL=854.7a3f5393.chunk.js.map